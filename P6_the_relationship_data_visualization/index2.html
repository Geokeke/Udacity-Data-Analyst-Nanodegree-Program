<!DOCTYPE html>
<html>
  <head>
    <link href="stylesheet.css" rel="stylesheet">
    <script src="http://d3js.org/d3.v4.min.js"></script>
    <script src="http://dimplejs.org/dist/dimple.v2.3.0.min.js"></script>
    <script type="text/javascript">
      function updateFir() {
        document.querySelector('svg').innerHTML = '';
        // d3.select("#chartContainer")
        d3.csv("flight_delay_cause_mini.csv", function (data) {
          // var svg = dimple.newSvg("#chartContainer", 670, 400);
          var myChart = new dimple.chart(svg, data);
          myChart.setBounds(20, 20, 460, 360) 
          myChart.addMeasureAxis("p", "First Quarter");
          var ring = myChart.addSeries("Cause", dimple.plot.pie);
          ring.innerRadius = "60%";
          myChart.addLegend(500, 20, 90, 300, "left");
          myChart.draw();
        });
        };
    </script>
    <script type="text/javascript">
      function updateSec() {
        document.querySelector('svg').innerHTML = '';
        // d3.select("#chartContainer")
        d3.csv("flight_delay_cause_mini.csv", function (data) {
          // var svg = dimple.newSvg("#chartContainer", 670, 400);
          var myChart = new dimple.chart(svg, data);
          myChart.setBounds(20, 20, 460, 360) 
          myChart.addMeasureAxis("p", "Second Quarter");
          var ring = myChart.addSeries("Cause", dimple.plot.pie);
          ring.innerRadius = "60%";
          myChart.addLegend(500, 20, 90, 300, "left");
          myChart.draw();
        });
        };
    </script>
        <script type="text/javascript">
      function updateThi() {
        document.querySelector('svg').innerHTML = '';
        // d3.select("#chartContainer")
        d3.csv("flight_delay_cause_mini.csv", function (data) {
          // var svg = dimple.newSvg("#chartContainer", 670, 400);
          var myChart = new dimple.chart(svg, data);
          myChart.setBounds(20, 20, 460, 360) 
          myChart.addMeasureAxis("p", "Third Quarter");
          var ring = myChart.addSeries("Cause", dimple.plot.pie);
          ring.innerRadius = "60%";
          myChart.addLegend(500, 20, 90, 300, "left");
          myChart.draw();
        });
        };
    </script>
        <script type="text/javascript">
      function updateFour() {
        document.querySelector('svg').innerHTML = '';
        // d3.select("#chartContainer")
        d3.csv("flight_delay_cause_mini.csv", function (data) {
          // var svg = dimple.newSvg("#chartContainer", 670, 400);
          var myChart = new dimple.chart(svg, data);
          myChart.setBounds(20, 20, 460, 360) 
          myChart.addMeasureAxis("p", "Fourth Quarter");
          var ring = myChart.addSeries("Cause", dimple.plot.pie);
          ring.innerRadius = "60%";
          myChart.addLegend(500, 20, 90, 300, "left");
          myChart.draw();
        });
        };
    </script>
    <script type="text/javascript">
      function updateAnn() {
        document.querySelector('svg').innerHTML = '';
        // d3.select("#chartContainer")
        d3.csv("flight_delay_cause_mini.csv", function (data) {
          // var svg = dimple.newSvg("#chartContainer", 670, 400);
          var myChart = new dimple.chart(svg, data);
          myChart.setBounds(20, 20, 460, 360) 
          myChart.addMeasureAxis("p", "All Year");
          var ring = myChart.addSeries("Cause", dimple.plot.pie);
          ring.innerRadius = "60%";
          myChart.addLegend(500, 20, 90, 300, "left");
          myChart.draw();
        });
        };
    </script>
  </head>
  <body>
    <h1 id="head1">Flight Delays by Cause (2008)</h1>
    <div id="chartContainer" align="center">
      <script type="text/javascript">
        var svg = dimple.newSvg("#chartContainer", 670, 400);
        d3.csv("flight_delay_cause_mini.csv", function (data) {
          var myChart = new dimple.chart(svg, data);
          myChart.setBounds(20, 20, 460, 360) 
          myChart.addMeasureAxis("p", "First Quarter");
          var ring = myChart.addSeries("Cause", dimple.plot.pie);
          ring.innerRadius = "60%";
          myChart.addLegend(500, 20, 90, 300, "left");
          myChart.draw();
        });
      </script>
      <center><button id="first" onclick="updateFir()">First Quarter</button></center>
      <center><button id="second" onclick="updateSec()">Second Quarter</button></center>
      <center><button id="third" onclick="updateThi()">Third Quarter</button></center>
      <center><button id="fourth" onclick="updateFour()">Fourth Quarter</button></center>
      <center><button id="annual" onclick="updateAnn()">All Year</button></center>
    </div>
    <div id="textContainer" >
      <p id="intro">
        The above diagrams show four quarters' ring charts of flight delays by cause,2008,USA.
      </p>
      <p id="introduction">
        A flight is considered delayed when it arrived 15 or more minutes than the schedule.
      </p>
      <p id="explanation">
        The cause of daly:
      </p>
      <ul>
        <li>
          <strong>Aircraft Arriving Late:</strong> A previous flight with same aircraft arrived late, causing the present flight to depart late.
        </li>
        <li>
          <strong>National Aviation System Delay:</strong> Delays and cancellations attributable to the national aviation system that refer to a broad set of conditions, such as non-extreme weather conditions, airport operations, heavy traffic volume, and air traffic control.
        </li>
        <li>
          <strong>Air Carrier Delay:</strong> The cause of the cancellation or delay was due to circumstances within the airline's control (e.g. maintenance or crew problems, aircraft cleaning, baggage loading, fueling, etc.).
        </li>
        <li>
          <strong>Extreme Weather:</strong> Significant meteorological conditions (actual or forecasted) that, in the judgment of the carrier, delays or prevents the operation of a flight such as tornado, blizzard or hurricane.
        </li>
        <li>
          <strong>Security Delay:</strong> Delays or cancellations caused by evacuation of a terminal or concourse, re-boarding of aircraft because of security breach, inoperative screening equipment and/or long lines in excess of 29 minutes at screening areas.
        </li>
      </ul>
      <p id="source">
        SOURCE: Bureau of Transportation Statistics
      </p>
    </div>
  </body>
</html>